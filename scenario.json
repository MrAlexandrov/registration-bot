{
  "states": {
    "start": {
      "type": "message",
      "message": "Привет! Я бот для регистрации на Пионерский выезд 2024!",
      "next_state": "check_double_registration"
    },
    "check_double_registration": {
      "type": "service",
      "next_state": [
        "message_fill_first_name_first_time",
        "message_already_registered"
      ]
    },
    "message_already_registered": {
      "type": "message",
      "message": "Мы уже знакомы, вот, что могу предложить",
      "next_state": "service_register_finished"
    },
    "message_fill_first_name_first_time": {
      "type": "message",
      "message": "Давай знакомиться, тебя зовут {first_name}?",
      "next_state": "check_first_name_first_time"
    },
    "check_first_name_first_time": {
      "type": "button",
      "message": "Пожалуйста, подтвердите: Вас зовут {first_name}?",
      "next_state": {
        "Да": "save_first_name",
        "Нет, давай исправлю": "fill_first_name_first_time"
      }
    },
    "fill_first_name_first_time": {
      "type": "input",
      "next_state": "save_first_name"
    },
    "save_first_name": {
      "type": "service",
      "next_state": "message_fill_last_name_first_time"
    },
    "message_fill_last_name_first_time": {
      "type": "message",
      "message": "Отлично, а фамилия у тебя {last_name}?",
      "next_state": "check_last_name_first_time"
    },
    "check_last_name_first_time": {
      "type": "button",
      "message": "Пожалуйста, подтвердите: Ваша фамилия - {last_name}?",
      "next_state": {
        "Да": "save_last_name",
        "Нет, давай исправлю": "fill_last_name_first_time"
      }
    },
    "fill_last_name_first_time": {
      "type": "input",
      "next_state": "save_last_name"
    },
    "save_last_name": {
      "type": "service",
      "next_state": "message_fill_group_first_time"
    },
    "message_fill_group_first_time": {
      "type": "message",
      "message": "Замечательно, а теперь напиши, пожалуйста, в какой группе ты учишься (в формате РК6-71Б)",
      "next_state": "fill_group_first_time"
    },
    "fill_group_first_time": {
      "type": "input",
      "next_state": "save_group"
    },
    "save_group": {
      "type": "service",
      "next_state": "message_end_registration"
    },
    "message_end_registration": {
      "type": "message",
      "message": "Я тебя записал, ещё увидимся!",
      "next_state": "save_user"
    },
    "save_user": {
      "type": "service",
      "next_state": "service_register_finished"
    },
    "service_register_finished": {
      "type": "service",
      "next_state": {
        "О выезде": "about_information",
        "Что взять": "what_to_take_information",
        "Исправить данные": "service_change_data"
      }
    },
    "about_information": {
      "type": "message",
      "next_state": "service_register_finished"
    },
    "what_to_take_information": {
      "type": "message",
      "next_state": "service_register_finished"
    },
    "service_change_data": {
      "type": "button",
      "next_state": {
        "Имя": "change_first_name",
        "Фамилию": "change_last_name",
        "Группу": "change_group",
        "Отмена": "cancel"
      }
    },
    "change_first_name": {
      "type": "input",
      "next_state": "update_first_name"
    },
    "update_first_name": {
      "type": "service",
      "next_state": "service_register_finished"
    },
    "change_last_name": {
      "type": "input",
      "next_state": "update_last_name"
    },
    "update_last_name": {
      "type": "service",
      "next_state": "service_register_finished"
    },
    "change_group": {
      "type": "input",
      "next_state": "update_group"
    },
    "update_group": {
      "type": "service",
      "next_state": "service_register_finished"
    }
  }
}
